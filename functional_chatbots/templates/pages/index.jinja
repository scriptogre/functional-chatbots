{#def
    request,
    chat_messages=[],
    is_dark_mode=False,
    is_fullscreen_mode=False
#}

<BaseLayout>

    <!-- Checkboxes (Dark mode, Fullscreen mode) -->
    <div class="absolute right-5 top-4 flex items-center gap-2">

        <!-- Dark Mode Checkbox -->
        <input name="is_dark_mode" type="checkbox" autocomplete="off" {% if is_dark_mode %}checked{% endif %}
               {# TODO: Fulfill the assistant's wish to be able to trigger this #}
               hx-post="/toggle-dark-mode"
               hx-select="input[name=is_dark_mode]"
               hx-swap="outerHTML"
        />

        <!-- Fullscreen Mode Checkbox -->
        <input name="is_fullscreen_mode" type="checkbox" autocomplete="off" {% if is_fullscreen_mode %}checked{% endif %}
               {# TODO: Fulfill the assistant's wish to be able to trigger this #}
               hx-post="/toggle-fullscreen-mode"
               hx-select="input[name=is_fullscreen_mode]"
               hx-swap="outerHTML"
        />

    </div> <!-- End of Checkboxes -->

    <!-- Chat -->
    <div class="flex flex-col gap-3 w-full h-full sm:max-w-[500px] sm:max-h-[400px] sm:fullscreen:max-w-full sm:fullscreen:max-h-full max-w-xl sm:fullscreen:max-w-full transition-[max-width,max-height]">

        <ChatContainer id="chat-container" class="group">

            <ChatMessage id="typing-indicator" class="hidden [body:has(#trigger-assistant.htmx-request)_&]:flex order-last [animation:fade_0.5s_both_0.25s]">
                Typing...
            </ChatMessage>

            <ChatPlaceholder class="group-has-[.chat-message:not(#typing-indicator)]:hidden" />

        </ChatContainer>

        <form id="user-message-form"
              hx-post="/add-user-message"
              hx-target="#chat-container"
              hx-swap="beforeend scroll:#chat-container:bottom"
              hx-on::after-request="htmx.find('input[name=message]').value = ''"
        >
            <ChatInput name="message" required />
        </form>

        <div id="trigger-assistant"
             hx-trigger="addAssistantMessage from:body"
             hx-post="/add-assistant-message"
             hx-target="#chat-container"
             hx-swap="beforeend scroll:#chat-container:bottom"
        />

    </div> <!-- End of Chat -->

</BaseLayout>