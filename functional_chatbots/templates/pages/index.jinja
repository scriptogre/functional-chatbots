{#def request, chat_messages=[] #}

<BaseLayout>
    <div class="flex flex-col gap-3 size-full max-w-full max-h-full transition-[max-width,max-height] duration-[250ms] sm:max-w-[500px] sm:max-h-[400px]">

        <ChatContainer id="chat-container" class="group">

            <ChatMessage id="typing-indicator" class="hidden [body:has(#trigger-assistant.htmx-request)_&]:flex order-last [animation:fade_0.5s_both_0.25s]">
                Typing...
            </ChatMessage>

            <ChatPlaceholder class="group-has-[.chat-message:not(#typing-indicator)]:hidden" />

        </ChatContainer>

        <form id="user-message-form"
              hx-post="/add-user-message"
              hx-target="#chat-container"
              hx-swap="beforeend scroll:#chat-container:bottom"
              hx-on::after-request="htmx.find('input[name=message]').value = ''"
        >
            <ChatInput name="message" required />
        </form>

        <div id="trigger-assistant"
             hx-trigger="addAssistantMessage from:body"
             hx-post="/add-assistant-message"
             hx-target="#chat-container"
             hx-swap="beforeend scroll:#chat-container:bottom"
        />

    </div>
</BaseLayout>