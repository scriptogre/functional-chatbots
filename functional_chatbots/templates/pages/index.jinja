{#def
    request,
    chat_messages=[],
    is_dark_mode=False,
    is_fullscreen_mode=False
#}

<BaseLayout>

    <!-- Toggles (Dark Mode, Fullscreen Mode) -->
    <div class="absolute right-5 top-4 flex items-center gap-2">

        <DarkModeToggle id="dark-mode-toggle" name="is_dark_mode" checked={is_dark_mode}
                        hx-post="/toggle-dark-mode"
                        hx-trigger="click, toggleDarkMode from:body delay:150ms"
                        hx-select="#dark-mode-toggle"
                        hx-swap="outerHTML"
        />

        <FullscreenModeToggle id="fullscreen-mode-toggle" name="is_fullscreen_mode" checked={is_fullscreen_mode}
                          hx-post="/toggle-fullscreen-mode"
                          hx-trigger="click, toggleFullscreenMode from:body delay:300ms"
                          hx-select="#fullscreen-mode-toggle"
                          hx-swap="outerHTML"
        />

    </div> <!-- End of Toggles -->

    <!-- Chat -->
    <div class="flex flex-col gap-3 w-full h-full sm:max-w-[500px] sm:max-h-[400px] sm:fullscreen:max-w-full sm:fullscreen:max-h-full max-w-xl sm:fullscreen:max-w-full transition-[max-width,max-height]">

        <ChatContainer id="chat-container" class="group">

            <ChatMessage id="typing-indicator" class="hidden [body:has(#trigger-assistant.htmx-request)_&]:flex order-last [animation:fade_0.5s_both_0.25s]">
                Typing...
            </ChatMessage>

            <ChatPlaceholder class="group-has-[.chat-message:not(#typing-indicator)]:hidden" />

        </ChatContainer>

        <form id="user-message-form"
              hx-post="/add-user-message"
              hx-target="#chat-container"
              hx-swap="beforeend scroll:#chat-container:bottom"
              hx-on::after-request="htmx.find('input[name=message]').value = ''"
        >
            <ChatInput name="message" required />
        </form>

        <div id="trigger-assistant"
             hx-trigger="addAssistantMessage from:body"
             hx-post="/add-assistant-message"
             hx-target="#chat-container"
             hx-swap="beforeend scroll:#chat-container:bottom"
        />

    </div> <!-- End of Chat -->

</BaseLayout>